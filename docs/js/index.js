var Setting,Turn,Board,AI;String.prototype.to_i=function(){return parseInt(this,10)},String.prototype.row_col=function(){var t,o,n,e,r;for(r=[],o=0,n=(e=this.split("")).length;o<n;o++)t=e[o],r.push(t.to_i());return r},Setting=function(){function t(){}return t.DISK={BLACK:"black",WHITE:"white",NONE:""},t.AI={SCORE:{A:0,B:0,C:-5,X:-10,CORNER:20,NONE:0}},t.BOARD={INITIAL:[["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","",t.DISK.WHITE,t.DISK.BLACK,"","",""],["","","",t.DISK.BLACK,t.DISK.WHITE,"","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""]],SCORE:[[t.AI.SCORE.CORNER,t.AI.SCORE.C,t.AI.SCORE.A,t.AI.SCORE.B,t.AI.SCORE.B,t.AI.SCORE.A,t.AI.SCORE.C,t.AI.SCORE.CORNER],[t.AI.SCORE.C,t.AI.SCORE.X,0,0,0,0,t.AI.SCORE.X,t.AI.SCORE.C],[t.AI.SCORE.A,0,0,0,0,0,0,t.AI.SCORE.A],[t.AI.SCORE.B,0,0,0,0,0,0,t.AI.SCORE.B],[t.AI.SCORE.B,0,0,0,0,0,0,t.AI.SCORE.B],[t.AI.SCORE.A,0,0,0,0,0,0,t.AI.SCORE.A],[t.AI.SCORE.C,t.AI.SCORE.X,0,0,0,0,t.AI.SCORE.X,t.AI.SCORE.C],[t.AI.SCORE.CORNER,t.AI.SCORE.C,t.AI.SCORE.A,t.AI.SCORE.B,t.AI.SCORE.B,t.AI.SCORE.A,t.AI.SCORE.C,t.AI.SCORE.CORNER]]},t}(),Turn=function(){function t(){this.this_player=Setting.DISK.BLACK,this.next_player=Setting.DISK.WHITE}return t.prototype.change=function(){var t;return t=[this.next_player,this.this_player],this.this_player=t[0],this.next_player=t[1],t},t}(),Board=function(){function t(){this.cells=Setting.BOARD.INITIAL,this.this_player=Setting.DISK.BLACK,this.next_player=Setting.DISK.WHITE,this.blank_cells=60,this.AI="-",this.you="-"}return t.ADJACENT=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],t.prototype.clone=function(){return jQuery.extend(!0,{},this)},t.prototype.change=function(){var t;return t=[this.next_player,this.this_player],this.this_player=t[0],this.next_player=t[1],t},t.prototype.count_you=function(){var t,o,n,e,r,i,s,a,_;for(o=0,_=n=0,r=(s=this.cells).length;n<r;_=++n)for(t=e=0,i=(a=s[_]).length;e<i;t=++e)a[t]===this.you&&(o+=1);return o},t.prototype.count_AI=function(){var t,o,n,e,r,i,s,a,_;for(o=0,_=n=0,r=(s=this.cells).length;n<r;_=++n)for(t=e=0,i=(a=s[_]).length;e<i;t=++e)a[t]===this.AI&&(o+=1);return o},t.prototype.draw=function(){var t,o,n,e,r,i,s,a,_,l;for(l=e=0,i=(a=this.cells).length;e<i;l=++e)for(n=r=0,s=(_=a[l]).length;r<s;n=++r)o=_[n],t=$("#"+l+n),this.can_move(l,n)?t.addClass("movable"):t.removeClass("movable"),o!==Setting.DISK.NONE&&(t.addClass("disk"),t.removeClass(Setting.DISK.BLACK),t.removeClass(Setting.DISK.WHITE),t.addClass(o));return $(".mini_disk.you").text(this.count_you()),$(".mini_disk.AI").text(this.count_AI())},t.prototype.draw_result=function(){return $(".mini_disk.AI").text().to_i()<$(".mini_disk.you").text().to_i()?$(".result").text("YOU WIN!!!"):$(".mini_disk.you").text().to_i()<$(".mini_disk.AI").text().to_i()?$(".result").text("YOU LOSE..."):$(".result").text("DRAW"),$(".choose_disk").hide(),$(".modal").fadeIn(),$(".result").addClass("show")},t.prototype.movable_cells=function(){var t,o,n,e,r,i,s,a,_;for(i=[],_=o=0,e=(s=this.cells).length;o<e;_=++o)for(t=n=0,r=(a=s[_]).length;n<r;t=++n)a[t],this.can_move(_,t)&&i.push([_,t]);return i},t.prototype.movable_cells_length=function(){return this.movable_cells().length},t.prototype.can_move_anywhere=function(){var t,o,n,e,r,i,s,a;for(a=o=0,e=(i=this.cells).length;o<e;a=++o)for(t=n=0,r=(s=i[a]).length;n<r;t=++n)if(s[t],this.can_move(a,t))return!0;return!1},t.prototype.move=function(t,o){return this.blank_cells-=1,this.flip(t,o),this.change()},t.prototype.can_move=function(o,n){var e,r,i,s,a,_;if(this.cells[o][n]!==Setting.DISK.NONE)return!1;for(e=0,r=(i=t.ADJACENT).length;e<r;e++)if(_=(s=i[e])[0],a=s[1],0<this.flip_disk_each_direction(o,n,_,a).length)return!0;return!1},t.prototype.flip=function(t,o){var n,e,r,i,s,a,_;for(this.cells[t][o]=this.this_player,s=[],n=0,e=(r=this.flip_disk(t,o)).length;n<e;n++)_=(i=r[n])[0],a=i[1],s.push(this.cells[_][a]=this.this_player);return s},t.prototype.flip_disk=function(o,n){var e,r,i,s,a,_,l;for(e=[],r=0,i=(s=t.ADJACENT).length;r<i;r++)l=(a=s[r])[0],_=a[1],e=e.concat(this.flip_disk_each_direction(o,n,l,_));return e},t.prototype.flip_disk_each_direction=function(t,o,n,e){var r,i,s,a,_;for(a=[],s=t,i=o,_=0;_<=8;_++){if(i+=e,!(0<=(s+=n)&&s<=7&&0<=i&&i<=7))return[];if((r=this.cells[s][i])!==this.next_player)return r===this.this_player?a:[];a.push([s,i])}},t}(),AI=function(){function t(t){this.board=t}return t.prototype.search=function(){},t}();var AI1,extend=function(t,o){for(var n in o)hasProp.call(o,n)&&(t[n]=o[n]);function e(){this.constructor=t}return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t},hasProp={}.hasOwnProperty;AI1=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return extend(o,AI),o.prototype.search=function(){var t,o,n,e,r,i,s,a,_,l,h;for(o in _=(e=[-1,-1])[0],a=e[1],n=-64,r=this.board.movable_cells())l=(i=r[o])[0],t=i[1],n<(h=this.board.flip_disk(l,t).length)&&(n=h,_=(s=[l,t])[0],a=s[1]);return[_,a]},o}();var AI2;extend=function(t,o){for(var n in o)hasProp.call(o,n)&&(t[n]=o[n]);function e(){this.constructor=t}return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t},hasProp={}.hasOwnProperty;AI2=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return extend(o,AI),o.prototype.search=function(){var t,o,n,e,r,i,s,a,_,l,h;for(o in _=(e=[-1,-1])[0],a=e[1],n=64,r=this.board.movable_cells())l=(i=r[o])[0],t=i[1],(h=this.board.flip_disk(l,t).length)<n&&(n=h,_=(s=[l,t])[0],a=s[1]);return[_,a]},o}();var AI3;extend=function(t,o){for(var n in o)hasProp.call(o,n)&&(t[n]=o[n]);function e(){this.constructor=t}return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t},hasProp={}.hasOwnProperty;AI3=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return extend(o,AI),o.prototype.search=function(){var t,o,n,e,r,i,s,a,_,l,h,c;for(o in l=(r=[-1,-1])[0],_=r[1],n=-64,i=this.board.movable_cells())h=(s=i[o])[0],t=s[1],(e=this.board.clone()).flip(h,t),n<(c=this.more_move_count(e))&&(n=c,l=(a=[h,t])[0],_=a[1]);return[l,_]},o.prototype.more_move_count=function(t){var o;return o=t.movable_cells_length(),t.change(),o-t.movable_cells_length()},o}();var AI4;extend=function(t,o){for(var n in o)hasProp.call(o,n)&&(t[n]=o[n]);function e(){this.constructor=t}return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t},hasProp={}.hasOwnProperty;AI4=function(t){function o(){return o.__super__.constructor.apply(this,arguments)}return extend(o,AI3),o.prototype.search=function(){var t,o,n,e,r,i,s,a,_,l,h,c;for(o in l=(r=[-1,-1])[0],_=r[1],n=-64,i=this.board.movable_cells())h=(s=i[o])[0],t=s[1],(e=this.board.clone()).move(h,t),n<(c=this.min_score(e))&&(n=c,l=(a=[h,t])[0],_=a[1]);return[l,_]},o.prototype.min_score=function(t){var o,n,e,r,i,s,a,_;for(n in a=64,r=t.movable_cells())s=(i=r[n])[0],o=i[1],(e=t.clone()).move(s,o),(_=this.more_move_count(e))<a&&(a=_);return a},o}();var AI5;extend=function(t,o){for(var n in o)hasProp.call(o,n)&&(t[n]=o[n]);function e(){this.constructor=t}return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t},hasProp={}.hasOwnProperty;AI5=function(t){function o(t){this.board=t,this.not_final_depth_limit=1}return extend(o,AI4),o.prototype.search=function(){return this.search_not_final()},o.prototype.search_not_final=function(){var t,o,n,e,r,i,s,a,_,l,h,c;for(o in n=(r=[-64,-1,-1])[0],l=r[1],_=r[2],i=this.board.movable_cells())h=(s=i[o])[0],t=s[1],(e=this.board.clone()).move(h,t),c=this.search_not_final_best_of_you(e,0,n),n<(c+=Setting.BOARD.SCORE[h][t])&&(n=(a=[c,h,t])[0],l=a[1],_=a[2]);return[l,_]},o.prototype.search_not_final_best_of_AI=function(t,o,n){var e,r,i,s,a,_,l,h;if(this.not_final_depth_limit<=o)return this.AI_movable_cells_length(t);if(i=-64,0===(s=t.movable_cells()).length)return t.change(),t.can_move_anywhere()?this.search_not_final_best_of_you(t,o+1,i):this.AI_movable_cells_length(t);for(r in s){if(l=(_=s[r])[0],e=_[1],(a=t.clone()).move(l,e),(h=this.search_not_final_best_of_you(a,o+1,i))<n)return h;i<h&&(i=h)}return i},o.prototype.search_not_final_best_of_you=function(t,o,n){var e,r,i,s,a,_,l,h;if(this.not_final_depth_limit<=o)return t.change(),this.AI_movable_cells_length(t);if(i=64,0===(s=t.movable_cells()).length)return t.change(),t.can_move_anywhere()?this.search_not_final_best_of_AI(t,o+1,i):64;for(r in s){if(l=(_=s[r])[0],e=_[1],(a=t.clone()).move(l,e),h=this.search_not_final_best_of_AI(a,o+1,i),n<(h-=Setting.BOARD.SCORE[l][e]))return h;h<i&&(i=h)}return i},o.prototype.AI_movable_cells_length=function(t){var o;return o=t.movable_cells_length(),t.change(),o-t.movable_cells_length()},o}();var AI6;extend=function(t,o){for(var n in o)hasProp.call(o,n)&&(t[n]=o[n]);function e(){this.constructor=t}return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t},hasProp={}.hasOwnProperty;AI6=function(t){function o(t){this.board=t,this.not_final_depth_limit=1,this.final_depth_limit=1}return extend(o,AI5),o.prototype.search=function(){return 16<this.board.blank_cells?this.search_not_final():this.search_final()},o.prototype.search_final=function(){var t,o,n,e,r,i,s,a,_,l,h,c;for(o in n=(r=[-64,-1,-1])[0],l=r[1],_=r[2],i=this.board.movable_cells())h=(s=i[o])[0],t=s[1],(e=this.board.clone()).move(h,t),n<(c=this.search_final_best_of_you(e,0,n))&&(n=(a=[c,h,t])[0],l=a[1],_=a[2]);return[l,_]},o.prototype.search_final_best_of_AI=function(t,o,n){var e,r,i,s,a,_,l,h;if(this.final_depth_limit<=o)return this.count_diff_with_you(t);if(i=-64,0===(s=t.movable_cells()).length)return t.change(),t.can_move_anywhere()?this.search_final_best_of_you(t,o+1,i):this.count_diff_with_you(t);for(r in s){if(l=(_=s[r])[0],e=_[1],(a=t.clone()).move(l,e),(h=this.search_final_best_of_you(a,o+1,i))<n)return h;i<h&&(i=h)}return i},o.prototype.search_final_best_of_you=function(t,o,n){var e,r,i,s,a,_,l,h;if(this.final_depth_limit<=o)return this.count_diff_with_you(t);if(i=64,0===(s=t.movable_cells()).length)return t.change(),t.can_move_anywhere()?this.search_final_best_of_AI(t,o+1,i):this.count_diff_with_you(t);for(r in s){if(l=(_=s[r])[0],e=_[1],(a=t.clone()).move(l,e),n<(h=this.search_final_best_of_AI(a,o+1,i)))return h;h<i&&(i=h)}return i},o.prototype.count_diff_with_you=function(t){var o,n,e,r,i,s,a,_,l,h;for(e=0,h=r=0,s=(_=t.cells).length;r<s;h=++r)for(n=i=0,a=(l=_[h]).length;i<a;n=++i)(o=l[n])===t.AI?e+=1:o===t.you&&(e-=1);return e},o}();var AI7;extend=function(t,o){for(var n in o)hasProp.call(o,n)&&(t[n]=o[n]);function e(){this.constructor=t}return e.prototype=o.prototype,t.prototype=new e,t.__super__=o.prototype,t},hasProp={}.hasOwnProperty;AI7=function(t){function o(t){this.board=t,this.not_final_depth_limit=3,this.final_depth_limit=9}return extend(o,AI6),o}(),window.onload=function(){var t;return window.board=new Board,window.board.draw(),$(".big_disk.black").on("click",function(){return window.board.you=Setting.DISK.BLACK,window.board.AI=Setting.DISK.WHITE,$(".mini_disk.you").addClass("black"),$(".mini_disk.AI").addClass("white"),$(".modal").fadeOut(),window.board.draw()}),$(".big_disk.white").on("click",function(){return window.board.you=Setting.DISK.WHITE,window.board.AI=Setting.DISK.BLACK,$(".mini_disk.you").addClass("white"),$(".mini_disk.AI").addClass("black"),$(".modal").fadeOut(),t(),window.board.draw()}),$(".cell").on("click",function(){var o,n,e;if(e=(n=$(this).attr("id").row_col())[0],o=n[1],window.board.can_move(e,o))return window.board.move(e,o),window.board.can_move_anywhere()?t():window.board.change(),window.board.draw(),window.board.can_move_anywhere()?void 0:window.board.draw_result()}),t=function(){var o,n,e;if(e=(n=new AI7(window.board).search())[0],o=n[1],window.board.move(e,o),!window.board.can_move_anywhere()&&(window.board.change(),window.board.can_move_anywhere()))return t()}};