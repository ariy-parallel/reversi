var Setting,Turn,Board,AI;String.prototype.to_i=function(){return parseInt(this,10)},String.prototype.row_col=function(){var t,r,o,e,n;for(n=[],r=0,o=(e=this.split("")).length;r<o;r++)t=e[r],n.push(t.to_i());return n},Setting=function(){function t(){}return t.DISK={BLACK:"black",WHITE:"white",NONE:""},t.AI={SCORE:{A:0,B:0,C:-5,X:-10,CORNER:20,NONE:0}},t.BOARD={INITIAL:[["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","",t.DISK.WHITE,t.DISK.BLACK,"","",""],["","","",t.DISK.BLACK,t.DISK.WHITE,"","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""]],ADDRESS:{"00":t.AI.SCORE.CORNER,"01":t.AI.SCORE.C,"02":t.AI.SCORE.A,"03":t.AI.SCORE.B,"04":t.AI.SCORE.B,"05":t.AI.SCORE.A,"06":t.AI.SCORE.C,"07":t.AI.SCORE.CORNER,10:t.AI.SCORE.C,11:t.AI.SCORE.X,12:t.AI.SCORE.NONE,13:t.AI.SCORE.NONE,14:t.AI.SCORE.NONE,15:t.AI.SCORE.NONE,16:t.AI.SCORE.X,17:t.AI.SCORE.C,20:t.AI.SCORE.A,21:t.AI.SCORE.NONE,22:t.AI.SCORE.NONE,23:t.AI.SCORE.NONE,24:t.AI.SCORE.NONE,25:t.AI.SCORE.NONE,26:t.AI.SCORE.NONE,27:t.AI.SCORE.A,30:t.AI.SCORE.B,31:t.AI.SCORE.NONE,32:t.AI.SCORE.NONE,33:t.AI.SCORE.NONE,34:t.AI.SCORE.NONE,35:t.AI.SCORE.NONE,36:t.AI.SCORE.NONE,37:t.AI.SCORE.B,40:t.AI.SCORE.B,41:t.AI.SCORE.NONE,42:t.AI.SCORE.NONE,43:t.AI.SCORE.NONE,44:t.AI.SCORE.NONE,45:t.AI.SCORE.NONE,46:t.AI.SCORE.NONE,47:t.AI.SCORE.B,50:t.AI.SCORE.A,51:t.AI.SCORE.NONE,52:t.AI.SCORE.NONE,53:t.AI.SCORE.NONE,54:t.AI.SCORE.NONE,55:t.AI.SCORE.NONE,56:t.AI.SCORE.NONE,57:t.AI.SCORE.A,60:t.AI.SCORE.C,61:t.AI.SCORE.X,62:t.AI.SCORE.NONE,63:t.AI.SCORE.NONE,64:t.AI.SCORE.NONE,65:t.AI.SCORE.NONE,66:t.AI.SCORE.X,67:t.AI.SCORE.C,70:t.AI.SCORE.CORNER,71:t.AI.SCORE.C,72:t.AI.SCORE.A,73:t.AI.SCORE.B,74:t.AI.SCORE.B,75:t.AI.SCORE.A,76:t.AI.SCORE.C,77:t.AI.SCORE.CORNER}},t}(),Turn=function(){function t(){this.this_player=Setting.DISK.BLACK,this.next_player=Setting.DISK.WHITE}return t.prototype.change=function(){var t;return t=[this.next_player,this.this_player],this.this_player=t[0],this.next_player=t[1],t},t}(),Board=function(){function t(){this.cells=Setting.BOARD.INITIAL,this.this_player=Setting.DISK.BLACK,this.next_player=Setting.DISK.WHITE}return t.ADJACENT=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],t.prototype.clone=function(){return jQuery.extend(!0,{},this)},t.prototype.change=function(){var t;return t=[this.next_player,this.this_player],this.this_player=t[0],this.next_player=t[1],t},t.prototype.draw=function(){var t,r,o,e,n,i,s,a,c,p,l,u;for(t=0,u=0,l=n=0,s=(c=this.cells).length;n<s;l=++n)for(e=i=0,a=(p=c[l]).length;i<a;e=++i)o=p[e],r=$("#"+l+e),this.can_move(l,e)?r.addClass("movable"):r.removeClass("movable"),o!==Setting.DISK.NONE&&(r.addClass("disk"),r.removeClass(Setting.DISK.BLACK),r.removeClass(Setting.DISK.WHITE),r.addClass(o),o===Setting.DISK.BLACK?t+=1:o===Setting.DISK.WHITE&&(u+=1));return $(".mini_disk.black").text(t),$(".mini_disk.white").text(u)},t.prototype.draw_result=function(){return $(".mini_disk.white").text()<$(".mini_disk.black").text()?($(".result").text("YOU WIN!!!"),$(".result").addClass("win")):$(".mini_disk.black").text()<$(".mini_disk.white").text()?($(".result").text("YOU LOSE..."),$(".result").addClass("lose")):$(".result").text("DROW")},t.prototype.movable_cells=function(){var t,r,o,e,n,i,s,a,c;for(i={},c=r=0,e=(s=this.cells).length;r<e;c=++r)for(t=o=0,n=(a=s[c]).length;o<n;t=++o)a[t],this.can_move(c,t)&&(i[""+c+t]="");return i},t.prototype.movable_cells_length=function(){return Object.keys(this.movable_cells()).length},t.prototype.can_move_anywhere=function(){return 0<this.movable_cells_length()},t.prototype.move=function(t,r){return this.flip(t,r),this.change()},t.prototype.can_move=function(r,o){var e,n,i,s,a,c;if(this.cells[r][o]!==Setting.DISK.NONE)return!1;for(e=0,n=(i=t.ADJACENT).length;e<n;e++)if(c=(s=i[e])[0],a=s[1],0<this.flip_disk_each_direction(r,o,c,a).length)return!0;return!1},t.prototype.flip=function(t,r){var o,e,n,i,s,a,c;for(this.cells[t][r]=this.this_player,s=[],o=0,e=(n=this.flip_disk(t,r)).length;o<e;o++)c=(i=n[o])[0],a=i[1],s.push(this.cells[c][a]=this.this_player);return s},t.prototype.flip_disk=function(r,o){var e,n,i,s,a,c,p;for(e=[],n=0,i=(s=t.ADJACENT).length;n<i;n++)p=(a=s[n])[0],c=a[1],e=e.concat(this.flip_disk_each_direction(r,o,p,c));return e},t.prototype.flip_disk_each_direction=function(t,r,o,e){var n,i,s,a,c;for(a=[],s=t,i=r,c=0;c<=8;c++){if(i+=e,!(0<=(s+=o)&&s<=7&&0<=i&&i<=7))return[];if((n=this.cells[s][i])!==this.next_player)return n===this.this_player?a:[];a.push([s,i])}},t}(),AI=function(){function t(t){this.board=t}return t.prototype.search=function(){},t}();var AI1,extend=function(t,r){for(var o in r)hasProp.call(r,o)&&(t[o]=r[o]);function e(){this.constructor=t}return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI1=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI),r.prototype.search=function(){var t,r,o,e,n,i,s,a,c,p;for(r in a=(e=[-1,-1])[0],s=e[1],o=-64,this.board.movable_cells())c=(n=r.row_col())[0],t=n[1],o<(p=this.board.flip_disk(c,t).length)&&(o=p,a=(i=[c,t])[0],s=i[1]);return[a,s]},r}();var AI2;extend=function(t,r){for(var o in r)hasProp.call(r,o)&&(t[o]=r[o]);function e(){this.constructor=t}return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI2=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI),r.prototype.search=function(){var t,r,o,e,n,i,s,a,c,p;for(r in a=(e=[-1,-1])[0],s=e[1],o=64,this.board.movable_cells())c=(n=r.row_col())[0],t=n[1],(p=this.board.flip_disk(c,t).length)<o&&(o=p,a=(i=[c,t])[0],s=i[1]);return[a,s]},r}();var AI3;extend=function(t,r){for(var o in r)hasProp.call(r,o)&&(t[o]=r[o]);function e(){this.constructor=t}return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI3=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI),r.prototype.search=function(){var t,r,o,e,n,i,s,a,c,p,l;for(r in c=(n=[-1,-1])[0],a=n[1],o=-64,this.board.movable_cells())p=(i=r.row_col())[0],t=i[1],(e=this.board.clone()).flip(p,t),o<(l=this.more_move_count(e))&&(o=l,c=(s=[p,t])[0],a=s[1]);return[c,a]},r.prototype.more_move_count=function(t){var r;return r=t.movable_cells_length(),t.change(),r-t.movable_cells_length()},r}();var AI4;extend=function(t,r){for(var o in r)hasProp.call(r,o)&&(t[o]=r[o]);function e(){this.constructor=t}return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI4=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI3),r.prototype.search=function(){var t,r,o,e,n,i,s,a,c,p,l;for(r in c=(n=[-1,-1])[0],a=n[1],o=-64,this.board.movable_cells())p=(i=r.row_col())[0],t=i[1],(e=this.board.clone()).move(p,t),o<(l=this.min_score(e))&&(o=l,c=(s=[p,t])[0],a=s[1]);return[c,a]},r.prototype.min_score=function(t){var r,o,e,n,i,s,a;for(o in s=64,t.movable_cells())i=(n=o.row_col())[0],r=n[1],(e=t.clone()).move(i,r),(a=this.more_move_count(e))<s&&(s=a);return s},r}();var AI5;extend=function(t,r){for(var o in r)hasProp.call(r,o)&&(t[o]=r[o]);function e(){this.constructor=t}return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI5=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI4),r.prototype.min_score=function(t,o){return r.__super__.min_score.call(this,t)+Setting.BOARD.ADDRESS[o]},r.prototype.search=function(){var t,r,o,e,n,i,s,a,c,p,l;for(r in c=(n=[-1,-1])[0],a=n[1],o=-64,this.board.movable_cells())p=(i=r.row_col())[0],t=i[1],(e=this.board.clone()).move(p,t),o<(l=this.min_score(e,r))&&(o=l,c=(s=[p,t])[0],a=s[1]);return[c,a]},r}(),window.onload=function(){var t;return window.board=new Board,window.board.draw(),$(".cell").on("click",function(){var r,o,e;if(e=(o=$(this).attr("id").row_col())[0],r=o[1],window.board.can_move(e,r))return window.board.move(e,r),window.board.can_move_anywhere()?t():window.board.change(),window.board.draw(),window.board.can_move_anywhere()?void 0:window.board.draw_result()}),t=function(){var r,o,e;if(e=(o=new AI5(window.board).search())[0],r=o[1],window.board.move(e,r),!window.board.can_move_anywhere()&&(window.board.change(),window.board.can_move_anywhere()))return t()}};