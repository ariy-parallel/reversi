var Setting,Turn,Board,AI;Setting=function(){function t(){}return t.DISK={BLACK:"black",WHITE:"white",NONE:""},t.BOARD={INITIAL:[["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","",t.DISK.WHITE,t.DISK.BLACK,"","",""],["","","",t.DISK.BLACK,t.DISK.WHITE,"","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""]]},t}(),Turn=function(){function t(){this.this_player=Setting.DISK.BLACK,this.next_player=Setting.DISK.WHITE}return t.prototype.change=function(){var t;return t=[this.next_player,this.this_player],this.this_player=t[0],this.next_player=t[1],t},t}(),Board=function(){function t(){this.cells=Setting.BOARD.INITIAL,this.this_player=Setting.DISK.BLACK,this.next_player=Setting.DISK.WHITE}return t.ADJACENT=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],t.prototype.clone=function(){return jQuery.extend(!0,{},this)},t.prototype.change=function(){var t;return t=[this.next_player,this.this_player],this.this_player=t[0],this.next_player=t[1],t},t.prototype.draw=function(){var t,r,e,n,o,i,s,a,p,l,c,h;for(t=0,h=0,c=o=0,s=(p=this.cells).length;o<s;c=++o)for(n=i=0,a=(l=p[c]).length;i<a;n=++i)e=l[n],r=$("#"+c+n),this.can_move(c,n)?r.addClass("movable"):r.removeClass("movable"),e!==Setting.DISK.NONE&&(r.addClass("disk"),r.removeClass(Setting.DISK.BLACK),r.removeClass(Setting.DISK.WHITE),r.addClass(e),e===Setting.DISK.BLACK?t+=1:e===Setting.DISK.WHITE&&(h+=1));return $(".mini_disk.black").text(t),$(".mini_disk.white").text(h)},t.prototype.movable_cells=function(){var t,r,e,n,o,i,s,a,p;for(i={},p=r=0,n=(s=this.cells).length;r<n;p=++r)for(t=e=0,o=(a=s[p]).length;e<o;t=++e)a[t],this.can_move(p,t)&&(i[""+p+t]="");return i},t.prototype.movable_cells_length=function(){return Object.keys(this.movable_cells()).length},t.prototype.can_move_anywhere=function(){return 0<this.movable_cells_length()},t.prototype.move=function(t,r){return this.flip(t,r),this.change()},t.prototype.can_move=function(r,e){var n,o,i,s,a,p;if(this.cells[r][e]!==Setting.DISK.NONE)return!1;for(n=0,o=(i=t.ADJACENT).length;n<o;n++)if(p=(s=i[n])[0],a=s[1],0<this.flip_disk_each_direction(r,e,p,a).length)return!0;return!1},t.prototype.flip=function(t,r){var e,n,o,i,s,a,p;for(this.cells[t][r]=this.this_player,s=[],e=0,n=(o=this.flip_disk(t,r)).length;e<n;e++)p=(i=o[e])[0],a=i[1],s.push(this.cells[p][a]=this.this_player);return s},t.prototype.flip_disk=function(r,e){var n,o,i,s,a,p,l;for(n=[],o=0,i=(s=t.ADJACENT).length;o<i;o++)l=(a=s[o])[0],p=a[1],n=n.concat(this.flip_disk_each_direction(r,e,l,p));return n},t.prototype.flip_disk_each_direction=function(t,r,e,n){var o,i,s,a,p;for(a=[],s=t,i=r,p=0;p<=8;p++){if(i+=n,!(0<=(s+=e)&&s<=7&&0<=i&&i<=7))return[];if((o=this.cells[s][i])!==this.next_player)return o===this.this_player?a:[];a.push([s,i])}},t}(),AI=function(){function t(t){this.board=t}return t.prototype.search=function(){},t}();var AI1,extend=function(t,r){for(var e in r)hasProp.call(r,e)&&(t[e]=r[e]);function n(){this.constructor=t}return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI1=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI),r.prototype.search=function(){var t,r,e,n,o,i,s,a,p,l,c;for(e in p=(o=[-1,-1])[0],a=o[1],n=-64,this.board.movable_cells())l=(i=function(){var t,n,o,i;for(i=[],t=0,n=(o=e.split("")).length;t<n;t++)r=o[t],i.push(parseInt(r,10));return i}())[0],t=i[1],n<(c=this.board.flip_disk(l,t).length)&&(n=c,p=(s=[l,t])[0],a=s[1]);return[parseInt(p,10),parseInt(a,10)]},r}();var AI2;extend=function(t,r){for(var e in r)hasProp.call(r,e)&&(t[e]=r[e]);function n(){this.constructor=t}return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI2=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI),r.prototype.search=function(){var t,r,e,n,o,i,s,a,p,l,c;for(e in p=(o=[-1,-1])[0],a=o[1],n=-64,this.board.movable_cells())l=(i=function(){var t,n,o,i;for(i=[],t=0,n=(o=e.split("")).length;t<n;t++)r=o[t],i.push(parseInt(r,10));return i}())[0],t=i[1],(c=this.board.flip_disk(l,t).length)<n&&(n=c,p=(s=[l,t])[0],a=s[1]);return[parseInt(p,10),parseInt(a,10)]},r}();var AI3;extend=function(t,r){for(var e in r)hasProp.call(r,e)&&(t[e]=r[e]);function n(){this.constructor=t}return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI3=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI),r.prototype.search=function(){var t,r,e,n,o,i,s,a,p,l,c,h;for(e in l=(i=[-1,-1])[0],p=i[1],n=-64,this.board.movable_cells())c=(s=function(){var t,n,o,i;for(i=[],t=0,n=(o=e.split("")).length;t<n;t++)r=o[t],i.push(parseInt(r,10));return i}())[0],t=s[1],(o=this.board.clone()).flip(c,t),n<(h=this.more_move_count(o))&&(n=h,l=(a=[c,t])[0],p=a[1]);return[parseInt(l,10),parseInt(p,10)]},r.prototype.more_move_count=function(t){var r;return r=t.movable_cells_length(),t.change(),r-t.movable_cells_length()},r}();var AI4;extend=function(t,r){for(var e in r)hasProp.call(r,e)&&(t[e]=r[e]);function n(){this.constructor=t}return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI4=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI),r.prototype.search=function(){var t,r,e,n,o,i,s,a,p,l,c,h,u,_,f,d,y,v,I;for(n in _=(p=[-1,-1])[0],u=p[1],i=-64,this.board.movable_cells()){for(o in f=(l=function(){var t,r,o,i;for(i=[],t=0,r=(o=n.split("")).length;t<r;t++)e=o[t],i.push(parseInt(e,10));return i}())[0],t=l[1],(a=jQuery.extend(!0,{},this.board)).move(f,t),y=64,a.movable_cells())d=(c=function(){var t,r,n,i;for(i=[],t=0,r=(n=o.split("")).length;t<r;t++)e=n[t],i.push(parseInt(e,10));return i}())[0],r=c[1],(s=jQuery.extend(!0,{},a)).move(d,r),e=s.movable_cells_length(),s.change(),I=s.movable_cells_length(),(v=e-I)<y&&(y=v);i<y&&(i=y,_=(h=[f,t])[0],u=h[1])}return[parseInt(_,10),parseInt(u,10)]},r}(),window.onload=function(){return window.board=new Board,window.board.draw(),$(".cell").on("click",function(){var t,r,e,n,o,i,s,a;if(s=(n=function(){var t,r,n,o;for(o=[],t=0,r=(n=$(this).attr("id").split("")).length;t<r;t++)e=n[t],o.push(parseInt(e,10));return o}.call(this))[0],t=n[1],window.board.can_move(s,t))return window.board.move(s,t),window.board.can_move_anywhere()?(a=(o=new AI3(window.board).search())[0],r=o[1],window.board.move(a,r),window.board.can_move_anywhere()||(window.board.change(),a=(i=new AI3(window.board).search())[0],r=i[1],window.board.move(a,r))):window.board.change(),window.board.draw()})};