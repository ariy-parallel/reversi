var Setting,Turn,Board,AI;Setting=function(){function t(){}return t.DISK={BLACK:"black",WHITE:"white",NONE:""},t.BOARD={INITIAL:[["","","","","","","",""],["","","","","","","",""],["","","","","","","",""],["","","",t.DISK.WHITE,t.DISK.BLACK,"","",""],["","","",t.DISK.BLACK,t.DISK.WHITE,"","",""],["","","","","","","",""],["","","","","","","",""],["","","","","","","",""]]},t}(),Turn=function(){function t(){this.this_player=Setting.DISK.BLACK,this.next_player=Setting.DISK.WHITE}return t.prototype.change=function(){var t;return t=[this.next_player,this.this_player],this.this_player=t[0],this.next_player=t[1],t},t}(),Board=function(){function t(){this.cells=Setting.BOARD.INITIAL,this.this_player=Setting.DISK.BLACK,this.next_player=Setting.DISK.WHITE}return t.ADJACENT=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],t.prototype.change=function(){var t;return t=[this.next_player,this.this_player],this.this_player=t[0],this.next_player=t[1],t},t.prototype.draw=function(){var t,r,n,e,i,o,s,a,h;for(o=this.cells,s=[],h=e=0,i=o.length;e<i;h=++e)a=o[h],s.push(function(){var e,i,o;for(o=[],n=e=0,i=a.length;e<i;n=++e)r=a[n],t=$("#"+h+n),this.can_move(h,n)?t.addClass("movable"):t.removeClass("movable"),r!==Setting.DISK.NONE?(t.addClass("disk"),t.removeClass(Setting.DISK.BLACK),t.removeClass(Setting.DISK.WHITE),o.push(t.addClass(r))):o.push(void 0);return o}.call(this));return s},t.prototype.move=function(t,r){return this.flip(t,r),this.change()},t.prototype.can_move=function(r,n){var e,i,o,s,a,h;if(this.cells[r][n]!==Setting.DISK.NONE)return!1;for(e=0,i=(o=t.ADJACENT).length;e<i;e++)if(h=(s=o[e])[0],a=s[1],0<this.flip_disk_each_direction(r,n,h,a).length)return!0;return!1},t.prototype.flip=function(t,r){var n,e,i,o,s,a,h;for(this.cells[t][r]=this.this_player,s=[],n=0,e=(i=this.flip_disk(t,r)).length;n<e;n++)h=(o=i[n])[0],a=o[1],s.push(this.cells[h][a]=this.this_player);return s},t.prototype.flip_disk=function(r,n){var e,i,o,s,a,h,l;for(e=[],i=0,o=(s=t.ADJACENT).length;i<o;i++)l=(a=s[i])[0],h=a[1],e=e.concat(this.flip_disk_each_direction(r,n,l,h));return e},t.prototype.flip_disk_each_direction=function(t,r,n,e){var i,o,s,a,h;for(a=[],s=t,o=r,h=0;h<=8;h++){if(o+=e,!(0<=(s+=n)&&s<=7&&0<=o&&o<=7))return[];if((i=this.cells[s][o])!==this.next_player)return i===this.this_player?a:[];a.push([s,o])}},t}(),AI=function(){function t(t){this.board=t}return t.prototype.search=function(){},t.prototype.movable_cells=function(){var t,r,n,e,i,o,s,a,h;for(o={},h=r=0,e=(s=Setting.BOARD.INITIAL).length;r<e;h=++r)for(t=n=0,i=(a=s[h]).length;n<i;t=++n)a[t],this.board.can_move(h,t)&&(o[""+h+t]="");return o},t}();var AI1,extend=function(t,r){for(var n in r)hasProp.call(r,n)&&(t[n]=r[n]);function e(){this.constructor=t}return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t},hasProp={}.hasOwnProperty;AI1=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return extend(r,AI),r.prototype.search=function(){var t,r,n,e,i,o,s;for(n in s=0,o=0,0,this.movable_cells())i=(e=function(){var t,e,i,o;for(o=[],t=0,e=(i=n.split("")).length;t<e;t++)r=i[t],o.push(parseInt(r,10));return o}())[0],t=e[1],0<this.board.flip_disk(i,t).length&&(s=i,o=t);return[parseInt(s,10),parseInt(o,10)]},r}(),window.onload=function(){return window.board=new Board,window.board.draw(),$(".cell").on("click",function(){var t,r,n,e,i,o,s;if(o=(e=function(){var t,r,e,i;for(i=[],t=0,r=(e=$(this).attr("id").split("")).length;t<r;t++)n=e[t],i.push(parseInt(n,10));return i}.call(this))[0],t=e[1],window.board.can_move(o,t))return window.board.move(o,t),s=(i=new AI1(window.board).search())[0],r=i[1],window.board.move(s,r),window.board.draw()})};